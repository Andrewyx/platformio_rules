{# The following comment applies to the generated file, not to the template.

If you are working on the template, knock yourself out ;) #}
; This file was automatically generated by bazel.
; Do not edit.

[platformio]
default_envs = {{ board }}

{%- if programmer == "usbtinyisp" %}
[env:myenv]
platform = atmelavr
framework = arduino
upload_protocol = usbtiny

{%- endif %}
[env:{{ board }}]
build_flags =
  -Wall
  -DPLATFORMIO_BUILD
{%- for flag in build_flags %}
  {{ flag }}
{%- endfor %}
lib_ldf_mode = {{ lib_ldf_mode }}
lib_deps =
{%- for lib in lib_deps %}
  {{ lib }}
{%- endfor %}
platform = {{ platform }}
board = {{ board }}
framework = 
  {{ framework }}
{%- for kwarg in environment_kwargs %}
  {{environment_kwargs}}
{%- endfor %}
{%- if programmer == "arduino_as_isp" %}
upload_protocol = custom
upload_port = {{ port }}
upload_speed = 19200
upload_flags =
    -C
    ${platformio.packages_dir}/tool-avrdude/avrdude.conf
    -p
    $BOARD_MCU
    -P
    $UPLOAD_PORT
    -b
    $UPLOAD_SPEED
    -c
    stk500v1
upload_command = avrdude $UPLOAD_FLAGS -U flash:w:$SOURCE:i
{%- endif %}
{%- if programmer == "usbtinyisp" %}
upload_protocol = custom
upload_flags =
    -C
    ; use "tool-avrdude-megaavr" for the atmelmegaavr platform
    ${platformio.packages_dir}/tool-avrdude/avrdude.conf
    -p
    $BOARD_MCU
    -c
    usbtiny
upload_command = avrdude $UPLOAD_FLAGS -U flash:w:$SOURCE:i
{%- endif %}